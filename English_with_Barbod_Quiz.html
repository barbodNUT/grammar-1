<html lang="en"><head><script>(function(firebaseConfig, initialAuthToken, appId) {
        window.__firebase_config = firebaseConfig;
        window.__initial_auth_token = initialAuthToken;
        window.__app_id = appId;
            })("\n{\n  \"apiKey\": \"AIzaSyCqyCcs2R2e7AegGjvFAwG98wlamtbHvZY\",\n  \"authDomain\": \"bard-frontend.firebaseapp.com\",\n  \"projectId\": \"bard-frontend\",\n  \"storageBucket\": \"bard-frontend.firebasestorage.app\",\n  \"messagingSenderId\": \"175205271074\",\n  \"appId\": \"1:175205271074:web:2b7bd4d34d33bf38e6ec7b\"\n}\n","eyJhbGciOiJSUzI1NiIsImtpZCI6ImQ1OTQzZDdlNWZhYTIxZjcyOTJjMzI3MGY3ZDBjNWJmNDE5MjJmOTciLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJmaXJlYmFzZS1hZG1pbnNkay1mYnN2Y0BiYXJkLWZyb250ZW5kLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwiYXVkIjoiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vZ29vZ2xlLmlkZW50aXR5LmlkZW50aXR5dG9vbGtpdC52MS5JZGVudGl0eVRvb2xraXQiLCJ1aWQiOiIwNDY3Njk2MTYxMjEwNzA5MDgwNCIsImlzcyI6ImZpcmViYXNlLWFkbWluc2RrLWZic3ZjQGJhcmQtZnJvbnRlbmQuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJjbGFpbXMiOnsiYXBwSWQiOiJjXzBlNDhiYWI2M2EzYWExM2ZfZ3JhbW1hcl9xdWl6Lmh0bWwtNjY5In0sImV4cCI6MTc3MDY1NzUxNywiaWF0IjoxNzcwNjUzOTE3LCJhbGciOiJSUzI1NiJ9.BiASZ5bvTdQnWg0U5gKaq8k1JVRQIwQz_jNfenrtIyW3HJLUvbnoOZKwwwCvSz5vOpSb9bg24qPL_5TLSAS4mBHfb0voVsDHstNF7vW5TXGew1LQjgFTVr1nefIwtP_L_-wU5QcWfuwi9DaOHIjk5OOhsA2r3g35f6WjSUN25XZtzQ6WoMQUB3SDieARztoFxiVevP0mz93pLMKuHCgepGVz1-ilJYhkCxixUfpExYlzrn-5MjFKJvh4n8qu4i2o2wQ_-puDrFW_332jUaWCk0CB6FsL8rXhlmUsBcM-A1VhQznaDgCcOVx7928bOYE_zt41Fq_a2uuSfY8ncfiKtg","c_0e48bab63a3aa13f_grammar_quiz.html-669")</script><script>'use strict';var h=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};function l(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}var n=l(this);
function p(a,b){if(b)a:{var d=n;a=a.split(".");for(var c=0;c<a.length-1;c++){var e=a[c];if(!(e in d))break a;d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&b!=null&&h(d,a,{configurable:!0,writable:!0,value:b})}}function r(a){function b(c){return a.next(c)}function d(c){return a.throw(c)}return new Promise(function(c,e){function f(g){g.done?c(g.value):Promise.resolve(g.value).then(b,d).then(f,e)}f(a.next())})}function t(a){return r(a())}
p("Object.values",function(a){return a?a:function(b){var d=[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&d.push(b[c]);return d}});p("Array.prototype.includes",function(a){return a?a:function(b,d){var c=this;c instanceof String&&(c=String(c));var e=c.length;d=d||0;for(d<0&&(d=Math.max(d+e,0));d<e;d++){var f=c[d];if(f===b||Object.is(f,b))return!0}return!1}});/*

 MIT License

 Copyright (c) 2017-2023 W.Y.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.

*/
function u(a,b){const d=a.style;b.backgroundColor&&(d.backgroundColor=b.backgroundColor);b.width&&(d.width=`${b.width}px`);b.height&&(d.height=`${b.height}px`);const c=b.style;c!=null&&Object.keys(c).forEach(e=>{d[e]=c[e]})};var v=(()=>{let a=0;return()=>{a+=1;return`u${`0000${(Math.random()*1679616<<0).toString(36)}`.slice(-4)}${a}`}})();function w(a){const b=[];for(let d=0,c=a.length;d<c;d++)b.push(a[d]);return b}let x=null;function y(a={}){return x?x:a.l?x=a.l:x=w(window.getComputedStyle(document.documentElement))}function z(a,b){return(a=(a.ownerDocument.defaultView||window).getComputedStyle(a).getPropertyValue(b))?parseFloat(a.replace("px","")):0}
function A(a,b={}){var d;if(!(d=b.width)){d=z(a,"border-left-width");var c=z(a,"border-right-width");d=a.clientWidth+d+c}(b=b.height)||(b=z(a,"border-top-width"),c=z(a,"border-bottom-width"),b=a.clientHeight+b+c);return{width:d,height:b}}function B(a){return new Promise((b,d)=>{const c=new Image;c.onload=()=>{c.decode().then(()=>{requestAnimationFrame(()=>b(c))})};c.onerror=d;c.crossOrigin="anonymous";c.decoding="async";c.src=a})}
function C(a){return t(function*(){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(a)).then(encodeURIComponent).then(b=>`data:image/svg+xml;charset=utf-8,${b}`)})}
function D(a,b,d){return t(function*(){const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");c.setAttribute("width",`${b}`);c.setAttribute("height",`${d}`);c.setAttribute("viewBox",`0 0 ${b} ${d}`);e.setAttribute("width","100%");e.setAttribute("height","100%");e.setAttribute("x","0");e.setAttribute("y","0");e.setAttribute("externalResourcesRequired","true");c.appendChild(e);e.appendChild(a);return C(c)})}
var E=(a,b)=>{if(a instanceof b)return!0;a=Object.getPrototypeOf(a);return a===null?!1:a.constructor.name===b.name||E(a,b)};function F(a,b){return y(b).map(d=>{const c=a.getPropertyValue(d),e=a.getPropertyPriority(d);return`${d}: ${c}${e?" !important":""};`}).join(" ")}
function G(a,b,d,c){a=window.getComputedStyle(a,d);var e=a.getPropertyValue("content");if(e!==""&&e!=="none"){var f=v();try{b.className=`${b.className} ${f}`}catch(k){return}e=document.createElement("style");var g=e.appendChild;d=`.${f}:${d}`;a.cssText?(c=a.getPropertyValue("content"),c=`${a.cssText} content: '${c.replace(/'|"/g,"")}';`):c=F(a,c);g.call(e,document.createTextNode(`${d}{${c}}`));b.appendChild(e)}};function H(a){return a.search(/^(data:)/)!==-1}function I(a,b,d){return t(function*(){const c=yield fetch(a,b);if(c.status===404)throw Error(`Resource "${c.url}" not found`);const e=yield c.blob();return new Promise((f,g)=>{const k=new FileReader;k.onerror=g;k.onloadend=()=>{try{f(d({o:c,result:k.result}))}catch(m){g(m)}};k.readAsDataURL(e)})})}const J={};function K(a,b,d){let c=a.replace(/\?.*/,"");d&&(c=a);/ttf|otf|eot|woff2?/i.test(c)&&(c=c.replace(/.*\//,""));return b?`[${b}]${c}`:c}
function L(a,b,d){return t(function*(){const c=K(a,b,d.C);if(J[c]!=null)return J[c];d.u&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime());let e;try{const f=yield I(a,d.i,({o:g,result:k})=>{b||(b=g.headers.get("Content-Type")||"");return k.split(/,/)[1]});e=`data:${b};base64,${f}`}catch(f){e=d.B||""}return J[c]=e})};const M={P:"application/font-woff",R:"application/font-woff",N:"application/font-truetype",v:"application/vnd.ms-fontobject",H:"image/png",F:"image/jpeg",D:"image/jpeg",A:"image/gif",M:"image/tiff",L:"image/svg+xml",O:"image/webp"};function N(a){return(a=/\.([^./]*?)$/g.exec(a))?a[1]:""};function O(a){return t(function*(){const b=a.toDataURL();return b==="data:,"?a.cloneNode(!1):B(b)})}function aa(a,b){return t(function*(){if(a.currentSrc){var d=document.createElement("canvas");const c=d.getContext("2d");d.width=a.clientWidth;d.height=a.clientHeight;c==null||c.drawImage(a,0,0,d.width,d.height);d=d.toDataURL();return B(d)}d=a.poster;d=yield L(d,M[N(d).toLowerCase()]||"",b);return B(d)})}
function ba(a,b){return t(function*(){try{let d;if(a==null?0:(d=a.contentDocument)==null?0:d.body)return yield P(a.contentDocument.body,b,!0)}catch(d){}return a.cloneNode(!1)})}function ca(a,b){return t(function*(){return E(a,HTMLCanvasElement)?O(a):E(a,HTMLVideoElement)?aa(a,b):E(a,HTMLIFrameElement)?ba(a,b):a.cloneNode(a.tagName!=null&&a.tagName.toUpperCase()==="SVG")})}
function da(a,b,d){return t(function*(){if(b.tagName!=null&&b.tagName.toUpperCase()==="SVG")return b;let c=[];if(a.tagName!=null&&a.tagName.toUpperCase()==="SLOT"&&a.assignedNodes)c=w(a.assignedNodes());else{let e;if(E(a,HTMLIFrameElement)&&((e=a.contentDocument)==null?0:e.body))c=w(a.contentDocument.body.childNodes);else{let f;c=w(((f=a.shadowRoot)!=null?f:a).childNodes)}}if(c.length===0||E(a,HTMLVideoElement))return b;yield c.reduce((e,f)=>e.then(()=>P(f,d)).then(g=>{g&&b.appendChild(g)}),Promise.resolve());
return b})}function ea(a,b,d){const c=b.style;if(c){var e=window.getComputedStyle(a);e.cssText?(c.cssText=e.cssText,c.transformOrigin=e.transformOrigin):y(d).forEach(f=>{let g=e.getPropertyValue(f);f==="font-size"&&g.endsWith("px")&&(g=`${Math.floor(parseFloat(g.substring(0,g.length-2)))-.1}px`);E(a,HTMLIFrameElement)&&f==="display"&&g==="inline"&&(g="block");f==="d"&&b.getAttribute("d")&&(g=`path(${b.getAttribute("d")})`);c.setProperty(f,g,e.getPropertyPriority(f))})}}
function fa(a,b){E(a,HTMLSelectElement)&&(b=Array.from(b.children).find(d=>a.value===d.getAttribute("value")))&&b.setAttribute("selected","")}
function ha(a,b){return t(function*(){var d=a.querySelectorAll?a.querySelectorAll("use"):[];if(d.length===0)return a;var c={};for(var e=0;e<d.length;e++){var f=d[e].getAttribute("xlink:href");if(f){const g=document.querySelector(f);a.querySelector(f)||!g||c[f]||(c[f]=yield P(g,b,!0))}}d=Object.values(c);if(d.length){c=document.createElementNS("http://www.w3.org/1999/xhtml","svg");c.setAttribute("xmlns","http://www.w3.org/1999/xhtml");c.style.position="absolute";c.style.width="0";c.style.height="0";
c.style.overflow="hidden";c.style.display="none";e=document.createElementNS("http://www.w3.org/1999/xhtml","defs");c.appendChild(e);for(f=0;f<d.length;f++)e.appendChild(d[f]);a.appendChild(c)}return a})}
function P(a,b,d){return t(function*(){return d||!b.filter||b.filter(a)?Promise.resolve(a).then(c=>ca(c,b)).then(c=>da(a,c,b)).then(c=>{E(c,Element)&&(ea(a,c,b),G(a,c,":before",b),G(a,c,":after",b),E(a,HTMLTextAreaElement)&&(c.textContent=a.value),E(a,HTMLInputElement)&&c.setAttribute("value",a.value),fa(a,c));return c}).then(c=>ha(c,b)):null})};const Q=/url\((['"]?)([^'"]+?)\1\)/g,ia=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ja=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ka(a){const b=[];a.replace(Q,(d,c,e)=>{b.push(e);return d});return b.filter(d=>!H(d))}
function la(a,b,d,c){return t(function*(){try{const e=d?(new URL(b,d||void 0)).toString():b;let f;f=yield L(e,M[N(b).toLowerCase()]||"",c);return a.replace(new RegExp(`(url\\(['"]?)(${b.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")})(['"]?\\))`,"g"),`$1${f}$3`)}catch(e){}return a})}function ma(a,{I:b}){return b?a.replace(ja,d=>{for(;;){const [c,,e]=ia.exec(d)||[],f=c,g=e;if(!g)return"";if(g===b)return`src: ${f};`}}):a}
function R(a,b,d){return t(function*(){if(a.search(Q)===-1)return a;const c=ma(a,d);return ka(c).reduce((e,f)=>e.then(g=>la(g,f,b,d)),Promise.resolve(c))})};function S(a,b,d){return t(function*(){var c;const e=(c=b.style)==null?void 0:c.getPropertyValue(a);return e?(c=yield R(e,null,d),b.style.setProperty(a,c,b.style.getPropertyPriority(a)),!0):!1})}function na(a,b){return t(function*(){(yield S("background",a,b))||(yield S("background-image",a,b));(yield S("mask",a,b))||(yield S("-webkit-mask",a,b))||(yield S("mask-image",a,b))||(yield S("-webkit-mask-image",a,b))})}
function oa(a,b){return t(function*(){const d=E(a,HTMLImageElement);if(d&&!H(a.src)||E(a,SVGImageElement)&&!H(a.href.baseVal)){var c=d?a.src:a.href.baseVal,e=yield L(c,M[N(c).toLowerCase()]||"",b);yield new Promise((f,g)=>{a.onload=f;a.onerror=b.m?(...k)=>{try{f(b.m(...k))}catch(m){g(m)}}:g;a.decode&&(a.decode=f);a.loading==="lazy"&&(a.loading="eager");d?(a.srcset="",a.src=e):a.href.baseVal=e})}})}
function pa(a,b){return t(function*(){const d=w(a.childNodes).map(c=>T(c,b));yield Promise.all(d).then(()=>a)})}function T(a,b){return t(function*(){E(a,Element)&&(yield na(a,b),yield oa(a,b),yield pa(a,b))})};const U={};function V(a){return t(function*(){var b=U[a];if(b!=null)return b;b=yield(yield fetch(a)).text();b={url:a,cssText:b};return U[a]=b})}function W(a,b){return t(function*(){let d=a.cssText;const c=/url\(["']?([^"')]+)["']?\)/g,e=(d.match(/url\([^)]+\)/g)||[]).map(f=>t(function*(){let g=f.replace(c,"$1");g.startsWith("https://")||(g=(new URL(g,a.url)).href);return I(g,b.i,({result:k})=>{d=d.replace(f,`url(${k})`);return[f,k]})}));return Promise.all(e).then(()=>d)})}
function X(a){if(a==null)return[];const b=[];a=a.replace(/(\/\*[\s\S]*?\*\/)/gi,"");for(var d=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){var c=d.exec(a);if(c===null)break;b.push(c[0])}a=a.replace(d,"");d=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi;for(c=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){let e=d.exec(a);if(e===null)if(e=c.exec(a),e===null)break;else d.lastIndex=c.lastIndex;else c.lastIndex=
d.lastIndex;b.push(e[0])}return b}
function qa(a,b){return t(function*(){const d=[],c=[];a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach((f,g)=>{if(f.type===CSSRule.IMPORT_RULE){let k=g+1;f=V(f.href).then(m=>W(m,b)).then(m=>X(m).forEach(q=>{try{e.insertRule(q,q.startsWith("@import")?k+=1:e.cssRules.length)}catch(Da){}})).catch(()=>{});c.push(f)}})}catch(f){const g=a.find(k=>k.href==null)||document.styleSheets[0];e.href!=null&&c.push(V(e.href).then(k=>W(k,b)).then(k=>X(k).forEach(m=>{g.insertRule(m,g.cssRules.length)})).catch(()=>
{}))}});return Promise.all(c).then(()=>{a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach(f=>{d.push(f)})}catch(f){}});return d})})}function ra(a){return a.filter(b=>b.type===CSSRule.FONT_FACE_RULE).filter(b=>b.style.getPropertyValue("src").search(Q)!==-1)}function sa(a,b){return t(function*(){if(a.ownerDocument==null)throw Error("Provided element is not within a Document");var d=w(a.ownerDocument.styleSheets);d=yield qa(d,b);return ra(d)})}
function ta(a){function b(c){(c.style.fontFamily||getComputedStyle(c).fontFamily).split(",").forEach(e=>{d.add(e.trim().replace(/["']/g,""))});Array.from(c.children).forEach(e=>{e instanceof HTMLElement&&b(e)})}const d=new Set;b(a);return d}function ua(a,b){return t(function*(){const d=yield sa(a,b),c=ta(a);return(yield Promise.all(d.filter(e=>c.has(e.style.fontFamily.trim().replace(/["']/g,""))).map(e=>R(e.cssText,e.parentStyleSheet?e.parentStyleSheet.href:null,b)))).join("\n")})}
function va(a,b){return t(function*(){const d=b.j!=null?b.j:b.K?null:yield ua(a,b);if(d){const c=document.createElement("style");c.appendChild(document.createTextNode(d));a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)}})};function wa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b),e=yield P(a,b,!0);yield va(e,b);yield T(e,b);u(e,b);return yield D(e,d,c)})}
function xa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b);var e=yield wa(a,b);e=yield B(e);const f=document.createElement("canvas"),g=f.getContext("2d"),k=b.G||window.devicePixelRatio||1,m=b.h||d,q=b.g||c;f.width=m*k;f.height=q*k;!b.J&&(f.width>16384||f.height>16384)&&(f.width>16384&&f.height>16384?f.width>f.height?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=16384):f.width>16384?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=
16384));f.style.width=`${m}`;f.style.height=`${q}`;b.backgroundColor&&(g.fillStyle=b.backgroundColor,g.fillRect(0,0,f.width,f.height));g.drawImage(e,0,0,f.width,f.height);return f})}function ya(a,b={}){return t(function*(){return(yield xa(a,b)).toDataURL()})};const za=["gemini.google.com","corp.google.com","proxy.googlers.com"];function Y(){return document.body.querySelectorAll('[class*="animate"]').length>0}function Z(a){return t(function*(){try{return yield ya(a,{h:a.offsetWidth,g:a.offsetHeight})}catch(d){var b=a.offsetHeight;const c=document.createElement("canvas");c.width=a.offsetWidth;c.height=b;return c.toDataURL("image/png")}})}
function Aa(){return t(function*(){const a=document.body.offsetWidth,b=document.body.offsetHeight,d=document.body.cloneNode(!0);d.querySelectorAll('[class*="animate"]').forEach(c=>{c.classList.remove(...Array.from(c.classList).filter(e=>e.startsWith("animate")))});d.style.width=`${a}px`;d.style.height=`${b}px`;return d})}
function Ba(a){return t(function*(){let b=document.body;if(Y()){var d=yield Aa();b=d;document.body.appendChild(d)}d=yield Z(b);Y()&&document.body.removeChild(b);window.parent.postMessage({type:"SEND_SCREENSHOT",image:d,topOffset:document.documentElement.scrollTop},a.origin)})}function Ca(a){return t(function*(){const b={type:"SEND_SCREENSHOT_FOR_DATA_VISUALIZATION",image:yield Z(document.body),topOffset:0};window.parent.postMessage(b,a.origin)})}
window.addEventListener("message",a=>t(function*(){if(za.some(d=>a.origin.includes(d))){var b=a.data;b&&(b.type==="MAKE_SCREENSHOT"&&(yield Ba(a)),b.type==="MAKE_SCREENSHOT_FOR_DATA_VISUALIZATION"&&(yield Ca(a)))}}));
</script><script>(function() {
  // Ensure this script is executed only once
  if (window.firebaseAuthBridgeScriptLoaded) {
    return;
  }
  window.firebaseAuthBridgeScriptLoaded = true;

  let nextTokenPromiseId = 0;

  // Stores { resolve, reject } for ongoing token requests
  const pendingTokenPromises = {};

  // Listen for messages from the Host Application
  window.addEventListener('message', function(event) {

    const messageData = event.data;

  if (messageData && messageData.type === 'RESOLVE_NEW_FIREBASE_TOKEN') {
      const { success, token, error, promiseId } = messageData ?? {};
      if (pendingTokenPromises[promiseId]) {
        if (success) {
          pendingTokenPromises[promiseId].resolve(token);
        } else {
          pendingTokenPromises[promiseId].reject(new Error(error || 'Token refresh failed from host.'));
        }
        delete pendingTokenPromises[promiseId];
      }
    }
  });

  // Expose a function for the Generated App to request a new Firebase token
  window.requestNewFirebaseToken = function() {
    const currentPromiseId = nextTokenPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingTokenPromises[currentPromiseId] = { resolve, reject };
    });
    if (window.parent && window.parent !== window) {
      window.parent.postMessage({
        type: 'REQUEST_NEW_FIREBASE_TOKEN',
        promiseId: currentPromiseId
      }, '*');
    } else {
      pendingTokenPromises[currentPromiseId].reject(new Error('No parent window to request token from.'));
      delete pendingTokenPromises[currentPromiseId];
    }
    return promise;
  };
})();</script><script>
let realOriginalGetUserMedia = null;
if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
  realOriginalGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);
}

(function() {
  if (navigator.mediaDevices && navigator.mediaDevices.__proto__) {
    try {
      Object.defineProperty(navigator.mediaDevices.__proto__, 'getUserMedia', {
        get: function() {
          return undefined; // Or throw an error
        },
        configurable: false
      });
    } catch (error) {
      console.error("Error defining prototype getter:", error);
    }
  }
})();

(function() {
  const pendingMediaResolvers = {};
  let nextMediaPromiseId = 0;

  function requestMediaPermissions(constraints) {
    const mediaPromiseId = nextMediaPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingMediaResolvers[mediaPromiseId] = (granted) => {
        delete pendingMediaResolvers[mediaPromiseId];
        resolve(granted);
      };
    });

    window.parent.postMessage({
      type: 'requestMediaPermission',
      constraints: constraints,
      promiseId: mediaPromiseId,
    }, '*');

    return promise;
  }

  let originalGetUserMedia = realOriginalGetUserMedia;

  function interceptGetUserMedia() {
    if (navigator.mediaDevices) {
      Object.defineProperty(navigator.mediaDevices, 'getUserMedia', {
        value: function(constraints) {
          return requestMediaPermissions(constraints).then((granted) => {
            if (granted) {
              if (originalGetUserMedia) {
                return originalGetUserMedia(constraints);
              } else {
                throw new Error("Original getUserMedia not available.");
              }
            } else {
              throw new DOMException('Permission denied', 'NotAllowedError');
            }
          });
        },
        writable: false,
        configurable: false
      });
    }
  }

  interceptGetUserMedia();

  const observer = new MutationObserver(function(mutationsList, observer) {
    for (const mutation of mutationsList) {
      if (mutation.type === 'reconfigured' && mutation.name === 'getUserMedia' && mutation.object === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'attributes' && mutation.attributeName === 'getUserMedia' && mutation.target === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'childList' && mutation.addedNodes) {
        mutation.addedNodes.forEach(node => {
          if (node === navigator.mediaDevices) {
            interceptGetUserMedia();
          }
        });
      }
    }
  });

  function interceptSpeechRecognition() {
    if (!window.SpeechRecognition && !window.webkitSpeechRecognition) {
      return;
    }

    const OriginalSpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    const SpeechRecognitionWrapper = function(...args) {
      const recognizer = new OriginalSpeechRecognition(...args);
      const originalStart = recognizer.start.bind(recognizer);

      recognizer.start = function() {
        requestMediaPermissions({ audio: true }).then(granted => {
          if (granted) {
            originalStart();
          } else {
            const errorEvent = new SpeechRecognitionErrorEvent('error');
            errorEvent.error = 'not-allowed'; // This is the standard error for permission denial.
            recognizer.dispatchEvent(errorEvent);
          }
        });
      };

      return recognizer;
    };

    SpeechRecognitionWrapper.prototype = OriginalSpeechRecognition.prototype;
    SpeechRecognitionWrapper.prototype.constructor = SpeechRecognitionWrapper;

    if (window.SpeechRecognition) {
      window.SpeechRecognition = SpeechRecognitionWrapper;
    }
    if (window.webkitSpeechRecognition) {
      window.webkitSpeechRecognition = SpeechRecognitionWrapper;
    }
  }

  interceptSpeechRecognition();

  window.addEventListener('message', function(event) {
    if (event.data) {
      if (event.data.type === 'resolveMediaPermission') {
        const { promiseId, granted } = event.data;
        if (pendingMediaResolvers[promiseId]) {
          pendingMediaResolvers[promiseId](granted);
        }
      }
    }
  });

})();</script><script>((function(modelInformation) {
  const originalFetch = window.fetch;
  // TODO: b/421908508 - Move these out of the script and match all generative AI model calls.
  let googleLlmBaseApiUrls = [
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':streamGenerateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageEditModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageTransformModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.ttsModelName + ':generateContent',
  ];
  modelInformation.deprecatedTextModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':streamGenerateContent',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':generateContent',
    );
  });
  modelInformation.deprecatedImageModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predict',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predictLongRunning',
    );
  });

  const pendingFetchResolvers = {};
  let nextPromiseId = 0;

  function handleStringInput(input, optionsArgument) {
    const actualUrl = input;
    const fetchCallArgs = [actualUrl, optionsArgument];
    const effectiveOptions = optionsArgument || {};
    const bodyForApiKeyCheck = effectiveOptions.body;
    const bodyForPostMessage = effectiveOptions.body;
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  function handleRequestInput(input, optionsArgument) {
    const actualUrl = input.url;
    const fetchCallArgs = [input, optionsArgument];
    const effectiveOptions = { method: input.method, headers: new Headers(input.headers) };
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (optionsArgument) {
      if (optionsArgument.method) effectiveOptions.method = optionsArgument.method;
      if (optionsArgument.headers) effectiveOptions.headers = new Headers(optionsArgument.headers);
      if ('body' in optionsArgument) {
        bodyForApiKeyCheck = optionsArgument.body;
        bodyForPostMessage = optionsArgument.body;
      } else {
        bodyForApiKeyCheck = undefined;
        bodyForPostMessage = input.body;
      }
    } else {
      bodyForApiKeyCheck = undefined;
      bodyForPostMessage = input.body;
    }
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  window.fetch = function(input, optionsArgument) {
    let actualUrl;
    let fetchCallArgs;
    let effectiveOptions = {};
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (typeof input === 'string') {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleStringInput(input, optionsArgument));
    } else if (input instanceof Request) {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleRequestInput(input, optionsArgument));
    } else {
      return originalFetch.apply(window, [input, optionsArgument]);
    }

    effectiveOptions.method = effectiveOptions.method || 'GET';
    if (!effectiveOptions.headers) {
      effectiveOptions.headers = new Headers();
    }


    if (typeof actualUrl === 'string' && googleLlmBaseApiUrls.some((url) => actualUrl.startsWith(url))) {
      let apiKeyIsNull = true;

      const regex = new RegExp("models/([^:]+)");
      const modelNameMatch = actualUrl.match(regex);
      const modelName = modelNameMatch ? modelNameMatch[1] : 'unspecified';


      try {
        const urlObject = new URL(actualUrl);  // Use URL object for robust parsing
        const apiKeyParam = urlObject.searchParams.get('key');
        if (apiKeyParam) {
          apiKeyIsNull = false;
        }
      } catch (e) {
        // Continue checks even if URL parsing fails
      }

      if (apiKeyIsNull && effectiveOptions.headers) {
        const h = new Headers(effectiveOptions.headers);
        const apiKeyHeaderValue = h.get('X-API-Key') || h.get('x-api-key');
        if (apiKeyHeaderValue) {
          apiKeyIsNull = false;
          return originalFetch.apply(window, fetchCallArgs);
        }
      }

      if (apiKeyIsNull && effectiveOptions.method && ['POST', 'PUT', 'PATCH'].includes(effectiveOptions.method.toUpperCase()) && typeof bodyForApiKeyCheck === 'string') {
        try {
          const bodyData = JSON.parse(bodyForApiKeyCheck);
          if (bodyData && bodyData.apiKey) {
            apiKeyIsNull = false;
            return originalFetch.apply(window, fetchCallArgs);
          }
        } catch (e) {
          // Ignore JSON parsing errors
        }
      }

      if(apiKeyIsNull) {
        const promiseId = nextPromiseId++;
        const promise = new Promise((resolve) => {
          pendingFetchResolvers[promiseId] = (resolvedResponse) => {
            delete pendingFetchResolvers[promiseId];
            resolve(resolvedResponse);
          };
        });

        let serializedBodyForPostMessage;
        if (typeof bodyForPostMessage === 'string' || bodyForPostMessage == null) {
            serializedBodyForPostMessage = bodyForPostMessage;
        } else if (bodyForPostMessage instanceof ReadableStream) {
            serializedBodyForPostMessage = null;
        } else {
            try {
                serializedBodyForPostMessage = JSON.stringify(bodyForPostMessage);
            } catch (e) {
                serializedBodyForPostMessage = null;
            }
        }

        const messageOptions = {
            method: effectiveOptions.method,
            headers: Object.fromEntries(new Headers(effectiveOptions.headers).entries()),
            body: serializedBodyForPostMessage
        };

        window.parent.postMessage({
          type: 'requestFetch',
          url: actualUrl,
          modelName: modelName,
          options: messageOptions,
          promiseId: promiseId,
        }, '*');

        return promise;
      }
      return originalFetch.apply(window, fetchCallArgs);
    }
    return originalFetch.apply(window, fetchCallArgs);
  };

  window.addEventListener('message', function(event) {
    if (event.data && event.data.type === 'resolveFetch') {
      const { promiseId, response } = event.data;
      if (pendingFetchResolvers[promiseId]) {
        try {
          const reconstructedResponse = new Response(response.body, {
            status: response.status,
            statusText: response.statusText,
            headers: new Headers(response.headers),
          });
          pendingFetchResolvers[promiseId](reconstructedResponse);
        } catch (error) {
          pendingFetchResolvers[promiseId](new Response(null, { status: 500, statusText: "Interceptor Response Reconstruction Error" }));
        }
      }
    }
  });

}))({"textModelName":"gemini-2.5-flash-preview-09-2025","imageModelName":"imagen-4.0-generate-001","imageEditModelName":"gemini-2.5-flash-image-preview","imageTransformModelName":"gemini-3-pro-image-preview-11-2025","videoModelName":"veo-2.0-generate-001","ttsModelName":"gemini-2.5-flash-preview-tts","deprecatedTextModelNames":["gemini-2.0-flash","gemini-2.5-flash-preview-04-17","gemini-2.5-flash-preview-05-20"],"deprecatedImageModelNames":["imagen-3.0-generate-001","imagen-3.0-generate-002"]})</script><script>(function() {
  const originalConsoleLog = console.log;
  const originalConsoleError = console.error;

    /**
   * Normalizes an error event or a promise rejection reason into a structured error object.
   * @param {*} errorEventOrReason The error object or reason.
   * @return {object} Structured error data { message, name, stack }.
   */
  function getErrorObject(errorEventOrReason) {
    if (errorEventOrReason instanceof Error) {
      return {
        message: errorEventOrReason.message,
        name: errorEventOrReason.name,
        stack: errorEventOrReason.stack,
      };
    }
    // Fallback for non-Error objects.
    try {
      return {
        message: JSON.stringify(errorEventOrReason),
        name: 'UnknownErrorType',
        stack: null,
      };
    } catch (e) {
      return {
        message: String(errorEventOrReason),
        name: 'UnknownErrorTypeNonStringifiable',
        stack: null,
      };
    }
  }

  /**
   * Converts an array of arguments (from log/error) into a single string.
   * Handles Error objects specially to include their message and stack.
   * @param {Array<*>} args - Arguments passed to console methods.
   * @return {string} A string representation of the arguments.
   */
  function stringifyArgs(args) {
    return args
      .map((arg) => {
        if (arg instanceof Error) {
          const {message, stack} = arg;
          return `Error: ${message}${stack ? ('\nStack: ' + stack) : ''}`;
        }
        if (typeof arg === 'object' && arg !== null) {
          try {
            return JSON.stringify(arg);
          } catch (error) {
            return '[Circular Object]';
          }
        } else {
          return String(arg);
        }
      })
      .join(' ');
  }

  console.log = function(...args) {
    const logString = stringifyArgs(args);
    window.parent.postMessage({ type: 'log', message: logString }, '*');
    originalConsoleLog.apply(console, args);
  };

  console.error = function(...args) {
    let errorData;
    if (args.length > 0 && args[0] instanceof Error) {
      const err = args[0];
      // If the first arg is an Error, capture its details.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        ...getErrorObject(err),
        rawArgsString: stringifyArgs(args.slice(1)),
        timestamp: new Date().toISOString(),
      };
    } else {
      // If not an Error object, treat all args as a general error message.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        message: stringifyArgs(args),
        name: 'ConsoleLoggedError',
        stack: null,
        timestamp: new Date().toISOString(),
      };
    }
    window.parent.postMessage(errorData, '*');
    originalConsoleError.apply(console, args);
  };

  // Listen for global unhandled synchronous errors.
  window.addEventListener('error', function(event) {
    const errorDetails = event.error ? getErrorObject(event.error) : {
      message: event.message,
      name: 'GlobalError',
      stack: null,
      filename: event.filename,
      lineno: event.lineno,
      colno: event.colno,
    };

    window.parent.postMessage({
      type: 'error',
      source: 'global',
      ...errorDetails,
      message: errorDetails.message || event.message,
      timestamp: new Date().toISOString(),
    }, '*');
  });

  // Listen for unhandled promise rejections (asynchronous errors).
  window.addEventListener('unhandledrejection', function(event) {
    const errorDetails = getErrorObject(event.reason);

    window.parent.postMessage({
      type: 'error',
      source: 'unhandledrejection',
      ...errorDetails,
      message: errorDetails.message || 'Unhandled Promise Rejection',
      timestamp: new Date().toISOString(),
    }, '*');
  });

})();</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Grammar Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&amp;display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .input-blank {
            border-bottom: 2px solid #cbd5e1;
            padding: 0 4px;
            color: #2563eb;
            font-weight: 600;
            outline: none;
            transition: border-color 0.2s;
            width: 120px;
            background: transparent;
        }
        .input-blank:focus { border-bottom-color: #2563eb; }
        .input-blank.correct { border-bottom-color: #16a34a; color: #16a34a; }
        .input-blank.incorrect { border-bottom-color: #dc2626; color: #dc2626; }
        
        .radio-option:checked + label {
            background-color: #eff6ff;
            border-color: #3b82f6;
            color: #1e40af;
        }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:0px}.-top-3{top:-0.75rem}.left-4{left:1rem}.top-0{top:0px}.z-10{z-index:10}.z-50{z-index:50}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:0.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-3{margin-bottom:0.75rem}.mt-2{margin-top:0.5rem}.mt-3{margin-top:0.75rem}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-16{height:4rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-8{height:2rem}.min-h-screen{min-height:100vh}.w-16{width:4rem}.w-4{width:1rem}.w-5{width:1.25rem}.w-8{width:2rem}.w-full{width:100%}.max-w-3xl{max-width:48rem}.max-w-4xl{max-width:56rem}.max-w-md{max-width:28rem}.flex-grow{flex-grow:1}.scale-95{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.space-y-8 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.rounded{border-radius:0.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:0.5rem}.rounded-xl{border-radius:0.75rem}.border{border-width:1px}.border-slate-100{--tw-border-opacity:1;border-color:rgb(241 245 249 / var(--tw-border-opacity, 1))}.border-yellow-100{--tw-border-opacity:1;border-color:rgb(254 249 195 / var(--tw-border-opacity, 1))}.border-slate-200{--tw-border-opacity:1;border-color:rgb(226 232 240 / var(--tw-border-opacity, 1))}.border-slate-300{--tw-border-opacity:1;border-color:rgb(203 213 225 / var(--tw-border-opacity, 1))}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-blue-100{--tw-bg-opacity:1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-slate-200{--tw-bg-opacity:1;background-color:rgb(226 232 240 / var(--tw-bg-opacity, 1))}.bg-slate-50{--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity, 1))}.bg-slate-800{--tw-bg-opacity:1;background-color:rgb(30 41 59 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-yellow-200{--tw-bg-opacity:1;background-color:rgb(254 240 138 / var(--tw-bg-opacity, 1))}.bg-yellow-50{--tw-bg-opacity:1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.bg-opacity-50{--tw-bg-opacity:0.5}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-3{padding:0.75rem}.px-2{padding-left:0.5rem;padding-right:0.5rem}.px-4{padding-left:1rem;padding-right:1rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pt-4{padding-top:1rem}.text-center{text-align:center}.font-serif{font-family:ui-serif, Georgia, Cambria, "Times New Roman", Times, serif}.text-2xl{font-size:1.5rem;line-height:2rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.leading-loose{line-height:2}.tracking-wide{letter-spacing:0.025em}.text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity:1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184 / var(--tw-text-opacity, 1))}.text-slate-500{--tw-text-opacity:1;color:rgb(100 116 139 / var(--tw-text-opacity, 1))}.text-slate-600{--tw-text-opacity:1;color:rgb(71 85 105 / var(--tw-text-opacity, 1))}.text-slate-700{--tw-text-opacity:1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}.text-slate-800{--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-800{--tw-text-opacity:1;color:rgb(133 77 14 / var(--tw-text-opacity, 1))}.opacity-0{opacity:0}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.backdrop-blur-sm{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.hover\:-translate-y-1:hover{--tw-translate-y:-0.25rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-slate-300:hover{--tw-bg-opacity:1;background-color:rgb(203 213 225 / var(--tw-bg-opacity, 1))}.hover\:bg-slate-900:hover{--tw-bg-opacity:1;background-color:rgb(15 23 42 / var(--tw-bg-opacity, 1))}.hover\:bg-slate-50:hover{--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity, 1))}.hover\:shadow-xl:hover{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.focus\:border-blue-500:focus{--tw-border-opacity:1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.focus\:ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.focus\:ring-blue-500:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(59 130 246 / var(--tw-ring-opacity, 1))}.peer:checked ~ .peer-checked\:border-blue-500{--tw-border-opacity:1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.peer:checked ~ .peer-checked\:bg-blue-50{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.peer:checked ~ .peer-checked\:text-blue-700{--tw-text-opacity:1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}@media (min-width: 640px){.sm\:block{display:block}}@media (min-width: 768px){.md\:grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}}</style></head>
<body class="bg-slate-50 text-slate-800 min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-10">
        <div class="max-w-4xl mx-auto px-4 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-xl font-bold text-slate-800">English with <span class="text-blue-600">Barbod</span></h1>
                <div class="text-sm font-medium text-slate-500 hidden sm:block">Comprehensive Review</div>
            </div>
            <button onclick="downloadQuiz()" class="flex items-center gap-2 bg-slate-800 hover:bg-slate-900 text-white text-sm font-semibold py-2 px-4 rounded-lg transition-colors shadow-sm">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                </svg>
                <span>Download Quiz</span>
            </button>
        </div>
    </header>

    <main class="max-w-3xl mx-auto px-4 py-8 space-y-8 flex-grow w-full">

        <!-- Intro -->
        <div class="bg-white rounded-xl shadow-sm p-6 border border-slate-100">
            <h2 class="text-2xl font-bold mb-2">Welcome, Student!</h2>
            <p class="text-slate-600">This assessment covers Pronouns, Tenses, and Conditionals. Complete all sections below and click "Grade Test" to see your results and explanations.</p>
        </div>

        <!-- Part 1: Pronouns -->
        <section id="part1" class="bg-white rounded-xl shadow-sm p-6 border border-slate-100">
            <div class="flex items-center gap-3 mb-6">
                <span class="bg-blue-100 text-blue-700 text-xs font-bold px-2 py-1 rounded uppercase tracking-wide">Part 1</span>
                <h3 class="text-xl font-bold">The Pronoun Grid</h3>
            </div>
            <p class="text-sm text-slate-500 mb-6 italic">Identify the correct pronoun or adjective to complete the sentence.</p>

            <div id="p1-questions" class="space-y-8"><div class="p-4 rounded-lg bg-slate-50 border border-slate-100">
                    <p class="font-medium text-lg mb-3">1. The board members have finally reached a decision, but the final responsibility for the project's success is ultimately __________.</p>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    <div class="flex items-center">
                        <input type="radio" name="p1q0" id="p1q0o0" value="0" class="peer hidden radio-option">
                        <label for="p1q0o0" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            A) their
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q0" id="p1q0o1" value="1" class="peer hidden radio-option">
                        <label for="p1q0o1" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            B) theirs
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q0" id="p1q0o2" value="2" class="peer hidden radio-option">
                        <label for="p1q0o2" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            C) they
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q0" id="p1q0o3" value="3" class="peer hidden radio-option">
                        <label for="p1q0o3" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            D) them
                        </label>
                    </div>
                </div>
                    <div id="p1-feedback-0" class="hidden mt-3 text-sm p-3 rounded"></div>
                </div><div class="p-4 rounded-lg bg-slate-50 border border-slate-100">
                    <p class="font-medium text-lg mb-3">2. Between you and __________, I dont think the new marketing strategy is going to work.</p>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    <div class="flex items-center">
                        <input type="radio" name="p1q1" id="p1q1o0" value="0" class="peer hidden radio-option">
                        <label for="p1q1o0" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            A) I
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q1" id="p1q1o1" value="1" class="peer hidden radio-option">
                        <label for="p1q1o1" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            B) my
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q1" id="p1q1o2" value="2" class="peer hidden radio-option">
                        <label for="p1q1o2" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            C) mine
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q1" id="p1q1o3" value="3" class="peer hidden radio-option">
                        <label for="p1q1o3" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            D) me
                        </label>
                    </div>
                </div>
                    <div id="p1-feedback-1" class="hidden mt-3 text-sm p-3 rounded"></div>
                </div><div class="p-4 rounded-lg bg-slate-50 border border-slate-100">
                    <p class="font-medium text-lg mb-3">3. The stray cat followed Sarah home; she noticed that __________ front paw was slightly injured.</p>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    <div class="flex items-center">
                        <input type="radio" name="p1q2" id="p1q2o0" value="0" class="peer hidden radio-option">
                        <label for="p1q2o0" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            A) its
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q2" id="p1q2o1" value="1" class="peer hidden radio-option">
                        <label for="p1q2o1" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            B) it's
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q2" id="p1q2o2" value="2" class="peer hidden radio-option">
                        <label for="p1q2o2" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            C) its'
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q2" id="p1q2o3" value="3" class="peer hidden radio-option">
                        <label for="p1q2o3" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            D) his
                        </label>
                    </div>
                </div>
                    <div id="p1-feedback-2" class="hidden mt-3 text-sm p-3 rounded"></div>
                </div><div class="p-4 rounded-lg bg-slate-50 border border-slate-100">
                    <p class="font-medium text-lg mb-3">4. While Julian and __________ were studying in the library, the fire alarm went off.</p>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    <div class="flex items-center">
                        <input type="radio" name="p1q3" id="p1q3o0" value="0" class="peer hidden radio-option">
                        <label for="p1q3o0" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            A) me
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q3" id="p1q3o1" value="1" class="peer hidden radio-option">
                        <label for="p1q3o1" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            B) mine
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q3" id="p1q3o2" value="2" class="peer hidden radio-option">
                        <label for="p1q3o2" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            C) I
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q3" id="p1q3o3" value="3" class="peer hidden radio-option">
                        <label for="p1q3o3" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            D) myself
                        </label>
                    </div>
                </div>
                    <div id="p1-feedback-3" class="hidden mt-3 text-sm p-3 rounded"></div>
                </div><div class="p-4 rounded-lg bg-slate-50 border border-slate-100">
                    <p class="font-medium text-lg mb-3">5. If anyone calls while I'm in the meeting, tell __________ Ill be back by 3:00 PM.</p>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    <div class="flex items-center">
                        <input type="radio" name="p1q4" id="p1q4o0" value="0" class="peer hidden radio-option">
                        <label for="p1q4o0" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            A) they
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q4" id="p1q4o1" value="1" class="peer hidden radio-option">
                        <label for="p1q4o1" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            B) them
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q4" id="p1q4o2" value="2" class="peer hidden radio-option">
                        <label for="p1q4o2" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            C) him
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q4" id="p1q4o3" value="3" class="peer hidden radio-option">
                        <label for="p1q4o3" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            D) his
                        </label>
                    </div>
                </div>
                    <div id="p1-feedback-4" class="hidden mt-3 text-sm p-3 rounded"></div>
                </div><div class="p-4 rounded-lg bg-slate-50 border border-slate-100">
                    <p class="font-medium text-lg mb-3">6. That laptop on the desk isn't __________; I borrowed it from the IT department.</p>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    <div class="flex items-center">
                        <input type="radio" name="p1q5" id="p1q5o0" value="0" class="peer hidden radio-option">
                        <label for="p1q5o0" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            A) my
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q5" id="p1q5o1" value="1" class="peer hidden radio-option">
                        <label for="p1q5o1" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            B) mine
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q5" id="p1q5o2" value="2" class="peer hidden radio-option">
                        <label for="p1q5o2" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            C) me
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q5" id="p1q5o3" value="3" class="peer hidden radio-option">
                        <label for="p1q5o3" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            D) I
                        </label>
                    </div>
                </div>
                    <div id="p1-feedback-5" class="hidden mt-3 text-sm p-3 rounded"></div>
                </div><div class="p-4 rounded-lg bg-slate-50 border border-slate-100">
                    <p class="font-medium text-lg mb-3">7. We should be proud of __________ for completing the marathon in such record time.</p>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    <div class="flex items-center">
                        <input type="radio" name="p1q6" id="p1q6o0" value="0" class="peer hidden radio-option">
                        <label for="p1q6o0" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            A) us
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q6" id="p1q6o1" value="1" class="peer hidden radio-option">
                        <label for="p1q6o1" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            B) our
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q6" id="p1q6o2" value="2" class="peer hidden radio-option">
                        <label for="p1q6o2" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            C) ourselves
                        </label>
                    </div>
                
                    <div class="flex items-center">
                        <input type="radio" name="p1q6" id="p1q6o3" value="3" class="peer hidden radio-option">
                        <label for="p1q6o3" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            D) ours
                        </label>
                    </div>
                </div>
                    <div id="p1-feedback-6" class="hidden mt-3 text-sm p-3 rounded"></div>
                </div></div>
        </section>

        <!-- Part 2: Tenses -->
        <section id="part2" class="bg-white rounded-xl shadow-sm p-6 border border-slate-100">
            <div class="flex items-center gap-3 mb-6">
                <span class="bg-blue-100 text-blue-700 text-xs font-bold px-2 py-1 rounded uppercase tracking-wide">Part 2</span>
                <h3 class="text-xl font-bold">The Tense Challenge</h3>
            </div>
            <p class="text-sm text-slate-500 mb-6 italic">Fill in the blanks using Present Simple/Continuous, Past Simple/Continuous, or Future (Will/Be going to).</p>

            <div class="bg-yellow-50 p-6 rounded-lg leading-loose text-lg font-serif text-slate-700 border border-yellow-100 relative">
                <div class="absolute -top-3 left-4 bg-yellow-200 text-yellow-800 text-xs font-bold px-2 py-1 rounded">Journal Entry</div>
                <div id="p2-text">
                Dear Journal,<br><br>
                Right now, I (1) <input type="text" id="p2i1" class="input-blank" placeholder="sit"> in a small caf in Venice. The sun (2) <input type="text" id="p2i2" class="input-blank" placeholder="shine"> brightly, though it (3) <input type="text" id="p2i3" class="input-blank" placeholder="rain"> heavily just an hour ago. While I (4) <input type="text" id="p2i4" class="input-blank" placeholder="walk"> across St. Marks Square earlier, I suddenly (5) <input type="text" id="p2i5" class="input-blank" placeholder="realize"> that I (6) <input type="text" id="p2i6" class="input-blank" placeholder="lose"> my map!<br><br>
                I usually (7) <input type="text" id="p2i7" class="input-blank" placeholder="not/get"> lost, but these winding streets are confusing. Tomorrow, I (8) <input type="text" id="p2i8" class="input-blank" placeholder="meet"> a local guide at 9:00 AMI already booked the tour, so I (9) <input type="text" id="p2i9" class="input-blank" placeholder="not/wander"> around aimlessly again. I think I (10) <input type="text" id="p2i10" class="input-blank" placeholder="order"> another espresso while I wait for the rain to stay away.<br><br>
                In fact, I (11) <input type="text" id="p2i11" class="input-blank" placeholder="see"> a dark cloud in the distance right now. It looks like it (12) <input type="text" id="p2i12" class="input-blank" placeholder="pour"> again very soon. My sister (13) <input type="text" id="p2i13" class="input-blank" placeholder="always/complain"> that I never check the weather forecast before I leave the hotel! Last year, when we (14) <input type="text" id="p2i14" class="input-blank" placeholder="travel"> through Japan, the same thing (15) <input type="text" id="p2i15" class="input-blank" placeholder="happen">.
            </div>
            </div>
        </section>

        <!-- Part 3: Conditionals -->
        <section id="part3" class="bg-white rounded-xl shadow-sm p-6 border border-slate-100">
            <div class="flex items-center gap-3 mb-6">
                <span class="bg-blue-100 text-blue-700 text-xs font-bold px-2 py-1 rounded uppercase tracking-wide">Part 3</span>
                <h3 class="text-xl font-bold">Zero vs. First Conditional</h3>
            </div>
            <p class="text-sm text-slate-500 mb-6 italic">Read the situation and write the full sentence using the appropriate conditional.</p>

            <div id="p3-questions" class="space-y-8"><div class="p-4 rounded-lg bg-slate-50 border border-slate-100">
                    <div class="mb-2">
                        <span class="text-xs font-bold text-slate-500 uppercase">Situation</span>
                        <p class="font-medium text-slate-800">You are a scientist explaining that heating ice always causes it to melt.</p>
                    </div>
                    <input type="text" id="p3i0" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none mt-2" placeholder="Type the full conditional sentence here...">
                    <div id="p3-feedback-0" class="hidden mt-3 text-sm p-3 rounded"></div>
                </div><div class="p-4 rounded-lg bg-slate-50 border border-slate-100">
                    <div class="mb-2">
                        <span class="text-xs font-bold text-slate-500 uppercase">Situation</span>
                        <p class="font-medium text-slate-800">You are looking at a very dark sky and telling your friend that if it rains, you will cancel the picnic.</p>
                    </div>
                    <input type="text" id="p3i1" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none mt-2" placeholder="Type the full conditional sentence here...">
                    <div id="p3-feedback-1" class="hidden mt-3 text-sm p-3 rounded"></div>
                </div><div class="p-4 rounded-lg bg-slate-50 border border-slate-100">
                    <div class="mb-2">
                        <span class="text-xs font-bold text-slate-500 uppercase">Situation</span>
                        <p class="font-medium text-slate-800">You are giving a general rule to a new employee: if they press the red button, the machine always stops immediately.</p>
                    </div>
                    <input type="text" id="p3i2" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none mt-2" placeholder="Type the full conditional sentence here...">
                    <div id="p3-feedback-2" class="hidden mt-3 text-sm p-3 rounded"></div>
                </div><div class="p-4 rounded-lg bg-slate-50 border border-slate-100">
                    <div class="mb-2">
                        <span class="text-xs font-bold text-slate-500 uppercase">Situation</span>
                        <p class="font-medium text-slate-800">You are talking to a student who is lazy. You want to warn them that if they don't study tonight, they will fail tomorrow's exam.</p>
                    </div>
                    <input type="text" id="p3i3" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none mt-2" placeholder="Type the full conditional sentence here...">
                    <div id="p3-feedback-3" class="hidden mt-3 text-sm p-3 rounded"></div>
                </div></div>
        </section>

        <!-- Actions -->
        <div class="flex justify-end pt-4">
            <button onclick="gradeTest()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-lg shadow-lg transform transition hover:-translate-y-1 hover:shadow-xl text-lg flex items-center gap-2">
                <span>Submit &amp; Grade</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                </svg>
            </button>
        </div>

    </main>

    <!-- Footer -->
    <footer class="py-8 text-center text-slate-400 text-sm font-medium">
        this practice is designed for Mahdiyeh
    </footer>

    <!-- Modal for Results -->
    <div id="resultModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6 transform transition-all scale-95 opacity-0" id="modalContent">
            <div class="text-center">
                <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 mb-4">
                    <svg class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <h3 class="text-2xl font-bold text-gray-900 mb-2">Quiz Complete!</h3>
                <p class="text-gray-500 mb-6">You scored <span id="scoreDisplay" class="font-bold text-blue-600 text-xl">0</span> out of <span id="totalDisplay" class="font-bold">0</span>.</p>
                <div class="flex gap-3 justify-center">
                    <button onclick="closeModal()" class="bg-slate-200 hover:bg-slate-300 text-slate-800 font-semibold py-2 px-4 rounded-lg">
                        Review Answers
                    </button>
                    <button onclick="location.reload()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg">
                        Try Again
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA ---

        const part1Data = [
            {
                q: "The board members have finally reached a decision, but the final responsibility for the project's success is ultimately __________.",
                options: ["their", "theirs", "they", "them"],
                correct: 1, // Index of correct answer
                explanation: "Possessive pronoun: replaces 'their responsibility'."
            },
            {
                q: "Between you and __________, I dont think the new marketing strategy is going to work.",
                options: ["I", "my", "mine", "me"],
                correct: 3,
                explanation: "Object pronoun: 'Between' is a preposition, which requires the object case."
            },
            {
                q: "The stray cat followed Sarah home; she noticed that __________ front paw was slightly injured.",
                options: ["its", "it's", "its'", "his"],
                correct: 0,
                explanation: "Possessive adjective: 'it's' means 'it is,' which doesn't fit here."
            },
            {
                q: "While Julian and __________ were studying in the library, the fire alarm went off.",
                options: ["me", "mine", "I", "myself"],
                correct: 2,
                explanation: "Subject pronoun: 'Julian and I' are the subjects performing the action."
            },
            {
                q: "If anyone calls while I'm in the meeting, tell __________ Ill be back by 3:00 PM.",
                options: ["they", "them", "him", "his"],
                correct: 1,
                explanation: "Object pronoun: 'Anyone' is traditionally followed by the gender-neutral 'them'."
            },
            {
                q: "That laptop on the desk isn't __________; I borrowed it from the IT department.",
                options: ["my", "mine", "me", "I"],
                correct: 1,
                explanation: "Possessive pronoun: shows ownership without a following noun."
            },
            {
                q: "We should be proud of __________ for completing the marathon in such record time.",
                options: ["us", "our", "ourselves", "ours"],
                correct: 2,
                explanation: "Reflexive pronoun: the subject 'we' is doing the action to itself."
            }
        ];

        const part2Data = [
            { id: 1, verb: "sit", correct: ["am sitting", "'m sitting"], expl: "Present Continuous: happening right now." },
            { id: 2, verb: "shine", correct: ["is shining", "'s shining"], expl: "Present Continuous: current state/action." },
            { id: 3, verb: "rain", correct: ["was raining"], expl: "Past Continuous: a background action in the past." },
            { id: 4, verb: "walk", correct: ["was walking"], expl: "Past Continuous: an ongoing action interrupted by another." },
            { id: 5, verb: "realize", correct: ["realized"], expl: "Past Simple: a completed action at a specific time." },
            { id: 6, verb: "lose", correct: ["lost"], expl: "Past Simple: completed action." },
            { id: 7, verb: "not/get", correct: ["don't get", "do not get"], expl: "Present Simple: a general habit or fact." },
            { id: 8, verb: "meet", correct: ["am meeting", "am going to meet", "'m meeting"], expl: "Present Continuous: for a fixed future arrangement." },
            { id: 9, verb: "not/wander", correct: ["am not going to wander", "'m not going to wander"], expl: "Be going to: a future intention." },
            { id: 10, verb: "order", correct: ["will order", "'ll order"], expl: "Will: a spontaneous decision made at the moment of speaking." },
            { id: 11, verb: "see", correct: ["see"], expl: "Present Simple: 'see' is a stative verb." },
            { id: 12, verb: "pour", correct: ["is going to pour", "'s going to pour"], expl: "Be going to: a prediction based on present evidence." },
            { id: 13, verb: "always/complain", correct: ["is always complaining", "'s always complaining"], expl: "Present Continuous + always: used to express an annoying habit." },
            { id: 14, verb: "travel", correct: ["were traveling", "were travelling"], expl: "Past Continuous: an ongoing past action." },
            { id: 15, verb: "happen", correct: ["happened"], expl: "Past Simple: a completed past event." }
        ];

        const part3Data = [
            {
                id: "c1",
                situation: "You are a scientist explaining that heating ice always causes it to melt.",
                hint: "Zero Conditional",
                keywords: ["if you heat ice", "it melts"],
                model: "If you heat ice, it melts.",
                expl: "Zero: Scientific fact."
            },
            {
                id: "c2",
                situation: "You are looking at a very dark sky and telling your friend that if it rains, you will cancel the picnic.",
                hint: "First Conditional",
                keywords: ["if it rains", "cancel the picnic"],
                model: "If it rains, I will cancel the picnic.",
                expl: "First: Specific future possibility."
            },
            {
                id: "c3",
                situation: "You are giving a general rule to a new employee: if they press the red button, the machine always stops immediately.",
                hint: "Zero Conditional",
                keywords: ["press the red button", "machine stops"],
                model: "If you press the red button, the machine stops.",
                expl: "Zero: General rule/functional fact."
            },
            {
                id: "c4",
                situation: "You are talking to a student who is lazy. You want to warn them that if they don't study tonight, they will fail tomorrow's exam.",
                hint: "First Conditional",
                keywords: ["don't study", "fail"],
                model: "If you don't study, you will fail the exam.",
                expl: "First: Specific consequence for a future event."
            }
        ];

        // --- RENDER FUNCTIONS ---

        function renderPart1() {
            const container = document.getElementById('p1-questions');
            // Clear content to prevent duplicates if downloaded and re-run
            container.innerHTML = '';
            
            part1Data.forEach((item, index) => {
                const qDiv = document.createElement('div');
                qDiv.className = "p-4 rounded-lg bg-slate-50 border border-slate-100";
                
                let optionsHtml = item.options.map((opt, optIndex) => `
                    <div class="flex items-center">
                        <input type="radio" name="p1q${index}" id="p1q${index}o${optIndex}" value="${optIndex}" class="peer hidden radio-option">
                        <label for="p1q${index}o${optIndex}" class="cursor-pointer px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 transition-colors w-full peer-checked:bg-blue-50 peer-checked:border-blue-500 peer-checked:text-blue-700">
                            ${String.fromCharCode(65 + optIndex)}) ${opt}
                        </label>
                    </div>
                `).join('');

                qDiv.innerHTML = `
                    <p class="font-medium text-lg mb-3">${index + 1}. ${item.q}</p>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">${optionsHtml}</div>
                    <div id="p1-feedback-${index}" class="hidden mt-3 text-sm p-3 rounded"></div>
                `;
                container.appendChild(qDiv);
            });
        }

        function renderPart2() {
            const container = document.getElementById('p2-text');
            // innerHTML assignment clears previous content automatically
            const text = `
                Dear Journal,<br><br>
                Right now, I (1) <input type="text" id="p2i1" class="input-blank" placeholder="sit"> in a small caf in Venice. The sun (2) <input type="text" id="p2i2" class="input-blank" placeholder="shine"> brightly, though it (3) <input type="text" id="p2i3" class="input-blank" placeholder="rain"> heavily just an hour ago. While I (4) <input type="text" id="p2i4" class="input-blank" placeholder="walk"> across St. Marks Square earlier, I suddenly (5) <input type="text" id="p2i5" class="input-blank" placeholder="realize"> that I (6) <input type="text" id="p2i6" class="input-blank" placeholder="lose"> my map!<br><br>
                I usually (7) <input type="text" id="p2i7" class="input-blank" placeholder="not/get"> lost, but these winding streets are confusing. Tomorrow, I (8) <input type="text" id="p2i8" class="input-blank" placeholder="meet"> a local guide at 9:00 AMI already booked the tour, so I (9) <input type="text" id="p2i9" class="input-blank" placeholder="not/wander"> around aimlessly again. I think I (10) <input type="text" id="p2i10" class="input-blank" placeholder="order"> another espresso while I wait for the rain to stay away.<br><br>
                In fact, I (11) <input type="text" id="p2i11" class="input-blank" placeholder="see"> a dark cloud in the distance right now. It looks like it (12) <input type="text" id="p2i12" class="input-blank" placeholder="pour"> again very soon. My sister (13) <input type="text" id="p2i13" class="input-blank" placeholder="always/complain"> that I never check the weather forecast before I leave the hotel! Last year, when we (14) <input type="text" id="p2i14" class="input-blank" placeholder="travel"> through Japan, the same thing (15) <input type="text" id="p2i15" class="input-blank" placeholder="happen">.
            `;
            container.innerHTML = text;
        }

        function renderPart3() {
            const container = document.getElementById('p3-questions');
            // Clear content to prevent duplicates if downloaded and re-run
            container.innerHTML = '';
            
            part3Data.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = "p-4 rounded-lg bg-slate-50 border border-slate-100";
                div.innerHTML = `
                    <div class="mb-2">
                        <span class="text-xs font-bold text-slate-500 uppercase">Situation</span>
                        <p class="font-medium text-slate-800">${item.situation}</p>
                    </div>
                    <input type="text" id="p3i${index}" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none mt-2" placeholder="Type the full conditional sentence here...">
                    <div id="p3-feedback-${index}" class="hidden mt-3 text-sm p-3 rounded"></div>
                `;
                container.appendChild(div);
            });
        }

        // --- ACTIONS ---

        function downloadQuiz() {
            const htmlContent = document.documentElement.outerHTML;
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'English_with_Barbod_Quiz.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function gradeTest() {
            let score = 0;
            const total = part1Data.length + part2Data.length + part3Data.length;

            // Grade Part 1
            part1Data.forEach((item, index) => {
                const selected = document.querySelector(`input[name="p1q${index}"]:checked`);
                const feedbackDiv = document.getElementById(`p1-feedback-${index}`);
                feedbackDiv.classList.remove('hidden');
                
                if (selected && parseInt(selected.value) === item.correct) {
                    score++;
                    feedbackDiv.className = "mt-3 text-sm p-3 rounded bg-green-100 text-green-800 border border-green-200";
                    feedbackDiv.innerHTML = `<strong>Correct!</strong> ${item.explanation}`;
                } else {
                    feedbackDiv.className = "mt-3 text-sm p-3 rounded bg-red-100 text-red-800 border border-red-200";
                    feedbackDiv.innerHTML = `<strong>Incorrect.</strong> The correct answer is <em>${item.options[item.correct]}</em>. <br>${item.explanation}`;
                }
            });

            // Grade Part 2
            part2Data.forEach((item) => {
                const input = document.getElementById(`p2i${item.id}`);
                const userVal = input.value.trim().toLowerCase();
                // Check if user value is in the acceptable array (case insensitive)
                const isCorrect = item.correct.some(ans => ans.toLowerCase() === userVal);

                // Create or find tooltip logic (simplified to visual cue + title attribute for simplicity)
                if (isCorrect) {
                    score++;
                    input.classList.add('correct');
                    input.classList.remove('incorrect');
                } else {
                    input.classList.add('incorrect');
                    input.classList.remove('correct');
                    input.value = `${input.value} (${item.correct[0]})`; // Show correct answer in parens
                }
                // Add explanation as title for hover
                input.title = item.expl;
            });

            // Grade Part 3
            part3Data.forEach((item, index) => {
                const input = document.getElementById(`p3i${index}`);
                const userVal = input.value.toLowerCase();
                const feedbackDiv = document.getElementById(`p3-feedback-${index}`);
                feedbackDiv.classList.remove('hidden');

                // Loose checking: check if both key parts exist
                const keyword1 = item.keywords[0].toLowerCase();
                const keyword2 = item.keywords[1].toLowerCase();
                
                const isCorrect = userVal.includes(keyword1) && userVal.includes(keyword2);

                if (isCorrect) {
                    score++;
                    feedbackDiv.className = "mt-3 text-sm p-3 rounded bg-green-100 text-green-800 border border-green-200";
                    feedbackDiv.innerHTML = `<strong>Correct!</strong> ${item.expl}`;
                } else {
                    feedbackDiv.className = "mt-3 text-sm p-3 rounded bg-red-100 text-red-800 border border-red-200";
                    feedbackDiv.innerHTML = `<strong>Try again.</strong> <br>Model Answer: <em>${item.model}</em><br>${item.expl}`;
                }
            });

            // Show Result Modal
            document.getElementById('scoreDisplay').innerText = score;
            document.getElementById('totalDisplay').innerText = total;
            
            const modal = document.getElementById('resultModal');
            const content = document.getElementById('modalContent');
            modal.classList.remove('hidden');
            
            // Trigger animation
            setTimeout(() => {
                content.classList.remove('scale-95', 'opacity-0');
                content.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        function closeModal() {
            const modal = document.getElementById('resultModal');
            const content = document.getElementById('modalContent');
            content.classList.remove('scale-100', 'opacity-100');
            content.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
                // Scroll to top to see feedback
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 300);
        }

        // Init
        renderPart1();
        renderPart2();
        renderPart3();

    </script>

</body></html>